enum AgeGroup {
  U7
  U8
  U9
  U10
  U11
  U12
  U13
  U14
  U15
  U16
  U17
  U18
  U19
  U20
  U21
}

enum SkillLevel {
  BEGINNER
  INTERMEDIATE
  EXPERIENCED
}

enum Positions {
  GK
  LB
  CB
  RB
  LM
  CM
  RM
  ST
}

enum GameType {
  FRIENDLY
  LEAGUE
  CUP
}

type TeamPlayer @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String!
  age: Int!
  kitNumber: Int!
  positions: [Positions!]!
  teamID: ID! @index(name: "byTeam")
}

type Team @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String!
  league: String!
  ageGroup: AgeGroup!
  location: String!
  email: AWSEmail!
  phoneNumber: AWSPhone!
  website: AWSURL!
  profileID: ID! @index(name: "byProfile")
  players: [TeamPlayer] @hasMany(indexName: "byTeam", fields: ["id"])
  associatedMatchPosts: [MatchPost] @hasMany(indexName: "byTeam", fields: ["id"])
}

type Player @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String!
  dob: AWSDate!
  ageGroup: AgeGroup!
  positions: [Positions!]!
  skillLevel: SkillLevel!
  profileID: ID! @index(name: "byProfile")
  registeredPlayerPosts: [PlayerPost] @manyToMany(relationName: "PlayerPlayerPost")
}

type Profile @model @auth(rules: [{allow: public}]) {
  id: ID!
  username: String!
  name: String!
  dob: AWSDate!
  email: AWSEmail!
  accountType: String!
  street: String!
  townCity: String!
  county: String!
  postcode: String!
  phoneNumber: AWSPhone!
  players: [Player] @hasMany(indexName: "byProfile", fields: ["id"])
  team: [Team] @hasMany(indexName: "byProfile", fields: ["id"])
  matchPosts: [MatchPost] @hasMany(indexName: "byProfile", fields: ["id"])
  interestedMatchPosts: [MatchPost] @manyToMany(relationName: "ProfileMatchPost")
  playerPosts: [PlayerPost] @hasMany(indexName: "byProfile", fields: ["id"])
  interestedPlayerPosts: [PlayerPost] @manyToMany(relationName: "ProfilePlayerPost")
  chats: [Chat] @manyToMany(relationName: "ProfileChat")
}

type MatchPost @model @auth(rules: [{allow: public}]) {
  id: ID!
  title: String!
  description: String!
  createdByName: String!
  createdByProfileID: ID! @index(name: "byProfile")
  gameType: GameType!
  ageGroup: AgeGroup!
  teamSize: Int!
  substitutionLimit: Boolean!
  cards: Boolean!
  halfLength: Int!
  kickOff: AWSDateTime!
  street: String!
  townCity: String!
  county: String!
  postcode: String!
  isActive: Boolean!
  teamID: ID! @index(name: "byTeam")
  teamName: String!
  interestedUsers: [Profile] @manyToMany(relationName: "ProfileMatchPost")
  selectedOpponent: ID
}

type PlayerPost @model @auth(rules: [{allow: public}]) {
  id: ID!
  title: String!
  description: String!
  createdByName: String!
  createdByProfileID: ID! @index(name: "byProfile")
  ageGroup: AgeGroup!
  positionsNeeded: [Positions!]!
  numOfPlayersNeeded: Int!
  skillLevel: SkillLevel!
  kickOff: AWSDateTime!
  street: String!
  townCity: String!
  county: String!
  postcode: String!
  isActive: Boolean!
  interestedUsers: [Profile] @manyToMany(relationName: "ProfilePlayerPost")
  registeredPlayers: [Player] @manyToMany(relationName: "PlayerPlayerPost")
  selectedPlayers: [ID]
}

type Chat @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  users: [Profile!] @manyToMany(relationName: "ProfileChat")
  messages: [ChatMessage] @hasMany(indexName: "byChat", fields: ["id"])
  userIDs: [ID!]!
}

type ChatMessage @model @auth(rules: [{allow: public}]) {
  id: ID!
  chatID: ID! @index(name: "byChat") 
  senderUserID: ID!
  message: String!
}
 